OUTER_SPRINT comp_dir ~%MOD_FOLDER%/components/sfall~
OUTER_SET sfall_updated = 0

ACTION_DEFINE_ASSOCIATIVE_ARRAY sfall_current BEGIN
  ~9cdc4bdcfc659bf9c6bee8684b35a18b~ => ~4.0.2~
END

ACTION_DEFINE_ASSOCIATIVE_ARRAY sfall BEGIN

~dcac2d253ecbb79051326d0d2548128f~ => ~4.0.1~
~6d5bf0de05fa2f518d3c1385a0efa630~ => ~4.0~
~ad6f663b53f2d411efa185c82096c3b6~ => ~3.8.7~
~6914b20d4e2b37cb1f47d6740f5b9ab9~ => ~3.8.6~
~c311f1d7335c476373cbdbbf71ccc7ab~ => ~3.8.5~
~162a92f4012b3cd6db6504847237e54a~ => ~3.8.4~
~36a4a5c9beed11585dafd15f207454fa~ => ~3.8.3~
~29201e8fbcb2821aec5da5092cb8b963~ => ~3.8.2~
~3de5b4fbcf4113b41819013ed8d7d98e~ => ~3.8.1~
~38b30defb7e76edb54e30d9d154f0a6b~ => ~3.8~
~ae2740c12dbd0c2e88375d13a54133af~ => ~3.7.4~
~f8619818e89059a908e8c566f8981a90~ => ~3.7.3~
~9a2d4ad2352cc2da39fdf0f87fd89eb0~ => ~3.7b~
~4310b5196fd5732beee78e1e27e4673f~ => ~3.7a~
~eca6f6d9690bd0840b7f2c09d98ef93e~ => ~3.7~
~abe82a69f38df08e815534e45ed176c1~ => ~3.6~
~5ef30e921af154c92301f03505da7e6e~ => ~3.5~
~9b2963d68ba064e3203253d85815aeaa~ => ~3.5_ecco~
~68eb52fe8169e94c3ec4451e7c6d9e37~ => ~3.4~
~8ab6c110dac5149bf1b9d70116b8a512~ => ~3.3~
~ff8d39304b97d0214ced7968b367f623~ => ~3.2~
~c040dedfd8cd3db77de9082f37066188~ => ~3.1~
~9d9328b38d6d354a8477edc1ddf92f99~ => ~3.0~
~b5ab59dd5f40f2c0dded26a0c47bde32~ => ~2.20~
~aac24ed5d07860420d9bfeacfffd65bf~ => ~2.19~
~f4d23bc2532da0f1e2f3aedf5eb51370~ => ~2.18~
~b6994ab075c188e59a0614c6ac860c87~ => ~2.17~
~9c5da342f437fc57808099d7b5059b23~ => ~2.16~
~36812266a5f55c8b5fb3a8fa0e109b92~ => ~2.15~
~6c9843a0421218046b569693a1e720be~ => ~2.14~
~a91335ad982c7db8eff8f4b6785fa1ea~ => ~2.13~
~95556e58d8d1b8561bf410d0c0f91c91~ => ~2.12~
~e786fa7ce0bfaba2491eb7df4c2ab00f~ => ~2.11~
~619a1a4fd4e6f7ce4eaa425a4cf60423~ => ~2.10~
~f505144593582bdecdb6bd13dbe25b8d~ => ~2.9~
~81c86abd5532006470d22427ab96d8ff~ => ~2.8~
~2b77fc185222bfdfe561a859a8977b54~ => ~2.7~
~890c180328c5d0bedd8c5f85263f2a02~ => ~2.6~
~0fe5855702b38b97531ab60e557793fc~ => ~2.5~
~ac536ed70348423049c277adb11199e5~ => ~2.4~
~152ac14033296dee909ce1e699d43ed8~ => ~2.3~
~38af3051a776cb56fe75222a7b36da02~ => ~2.2b~
~179d49a5e81935178e442fee87b8fde0~ => ~2.2~
~c4d86561a98084c540bfccb5750b4876~ => ~2.1~
END

ACTION_IF FILE_EXISTS ~ddraw.dll~ BEGIN

  ACTION_PHP_EACH sfall_current AS checksum => version BEGIN
    ACTION_IF sfall_updated == 0 BEGIN //less md5 calculations
      ACTION_IF FILE_MD5 ddraw.dll ~%checksum%~ BEGIN
        PRINT @34 //Good Sfall version found!
        OUTER_SET sfall_updated = 1
      END
    END
  END

  ACTION_PHP_EACH sfall AS checksum => version BEGIN
    ACTION_IF sfall_updated == 0 BEGIN //less md5 calculations
      ACTION_IF FILE_MD5 ddraw.dll ~%checksum%~ BEGIN
        PRINT @31 //Updating Sfall
        COPY ~%comp_dir%/ddraw.dll~ ~ddraw.dll~
        OUTER_SET sfall_updated = 1
      END
    END
  END

  ACTION_IF sfall_updated = 0 BEGIN
    PRINT @33 //Unknown Sfall version, not updating!
  END

END ELSE BEGIN
  PRINT @30 //Installing Sfall
  COPY ~%comp_dir%/ddraw.dll~ ~ddraw.dll~
  COPY ~%comp_dir%/ddraw.ini~ ~ddraw.ini~
END
